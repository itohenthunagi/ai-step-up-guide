/**
 * Main CSS File - 生成AIステップアップガイド
 * 全CSSファイルの統合・インポート
 * 
 * 読み込み順序：
 * 1. Variables (CSS変数定義)
 * 2. Reset (ブラウザ初期化)
 * 3. Base (基本スタイル)
 * 4. Layout (レイアウトシステム)
 * 5. Components (UIコンポーネント)
 * 6. Utilities (ユーティリティクラス)
 */

/* ===== 1. CSS変数定義 ===== */
@import url('./src/css/variables.css');

/* ===== 2. リセット・初期化 ===== */
@import url('./src/css/reset.css');

/* ===== 3. 基本スタイル ===== */
@import url('./src/css/base.css');

/* ===== 4. レイアウトシステム ===== */
@import url('./src/css/layout.css');

/* ===== 5. UIコンポーネント ===== */
@import url('./src/css/components.css');

/* ===== 6. ユーティリティクラス ===== */
@import url('./src/css/utilities.css');

/* ===== カスタムプロパティ（プロジェクト固有） ===== */
:root {
  /* スクロール動作のカスタマイズ */
  scroll-behavior: smooth;
  
  /* フォント読み込み最適化 */
  font-display: swap;
}

/* ===== フォント読み込み ===== */
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;600;700&display=swap');

/* ===== プリント用スタイル拡張 ===== */
@media print {
  /* ヘッダー・フッターの調整 */
  header,
  footer {
    position: static !important;
    box-shadow: none !important;
  }
  
  /* ナビゲーションを非表示 */
  nav {
    display: none !important;
  }
  
  /* 背景色・シャドウの除去 */
  .hero-section,
  .content-highlights,
  .card {
    background: white !important;
    box-shadow: none !important;
    border: 1px solid #ccc !important;
  }
  
  /* リンクURL表示 */
  a:after {
    content: " (" attr(href) ")";
    font-size: 0.8em;
    color: #666;
  }
  
  a[href^="#"]:after,
  a[href^="javascript:"]:after {
    content: "";
  }
}

/* ===== アクセシビリティ拡張 ===== */

/* 高コントラストモード対応の拡張 */
@media (prefers-contrast: high) {
  /* ボーダーの強調 */
  .card,
  .content-highlights,
  input,
  textarea,
  select,
  button {
    border-width: 2px !important;
    border-color: currentColor !important;
  }
  
  /* フォーカス表示の強化 */
  :focus-visible {
    outline: 3px solid currentColor !important;
    outline-offset: 2px !important;
  }
}

/* 大きなフォント設定対応 */
@media (min-resolution: 1.5dppx) and (min-width: 1024px) {
  :root {
    --font-size-base: 1.125rem; /* 18px */
    --font-size-sm: 1rem;       /* 16px */
    --font-size-xs: 0.875rem;   /* 14px */
  }
}

/* ===== パフォーマンス最適化 ===== */

/* GPU アクセラレーション対象要素 */
.card,
.btn,
header,
.hero-section {
  will-change: transform;
  transform: translateZ(0);
}

/* 画像の遅延読み込み対応 */
img[loading="lazy"] {
  opacity: 0;
  transition: opacity 0.3s;
}

img[loading="lazy"].loaded {
  opacity: 1;
}

/* ===== 開発者向けヘルパー ===== */

/* デバッグ用（開発時のみ使用） */
.debug * {
  outline: 1px solid red !important;
  opacity: 0.8 !important;
}

.debug-grid {
  background-image: 
    linear-gradient(rgba(255, 0, 0, 0.1) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255, 0, 0, 0.1) 1px, transparent 1px);
  background-size: 20px 20px;
}

/* ===== カスタムスクロールバー（モダンブラウザ） ===== */
* {
  scrollbar-width: thin;
  scrollbar-color: var(--color-gray-400) var(--color-gray-100);
}

*::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

*::-webkit-scrollbar-track {
  background: var(--color-gray-100);
  border-radius: var(--border-radius-full);
}

*::-webkit-scrollbar-thumb {
  background: var(--color-gray-400);
  border-radius: var(--border-radius-full);
  border: 2px solid var(--color-gray-100);
}

*::-webkit-scrollbar-thumb:hover {
  background: var(--color-gray-500);
}

*::-webkit-scrollbar-thumb:active {
  background: var(--color-gray-600);
}

/* ===== フォーカストラップ（モーダル等で使用） ===== */
.focus-trap {
  position: relative;
}

.focus-trap:before,
.focus-trap:after {
  content: '';
  position: absolute;
  width: 1px;
  height: 1px;
  opacity: 0;
  pointer-events: none;
}

/* ===== 特殊なレイアウト調整 ===== */

/* Internet Explorer 11 対応 */
@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {
  .flex {
    display: -ms-flexbox;
    display: flex;
  }
  
  .grid {
    display: block; /* IE11ではGridをサポートしていないためfallback */
  }
  
  .grid > * {
    display: inline-block;
    width: 48%;
    margin: 1%;
    vertical-align: top;
  }
}

/* ===== エラー状態・警告表示 ===== */
.error-boundary {
  padding: var(--space-8);
  background-color: var(--color-danger-light);
  border: 2px solid var(--color-danger);
  border-radius: var(--border-radius-lg);
  text-align: center;
  margin: var(--space-4) 0;
}

.error-boundary h2 {
  color: var(--color-danger-dark);
  margin-bottom: var(--space-4);
}

.error-boundary p {
  color: var(--color-danger-dark);
}

/* ===== 成功・完了状態 ===== */
.success-message {
  padding: var(--space-4);
  background-color: var(--color-success-light);
  border: 1px solid var(--color-success);
  border-radius: var(--border-radius-md);
  color: var(--color-success-dark);
  margin: var(--space-4) 0;
}

/* ===== 読み込み状態 ===== */
.loading-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(255, 255, 255, 0.8);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: var(--z-index-modal);
}

.loading-spinner {
  width: 3rem;
  height: 3rem;
  border: 4px solid var(--color-gray-200);
  border-top-color: var(--color-primary-500);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

/* ===== 終了マーカー ===== */
/* 
   このCSSファイルの読み込みが完了したことを示すマーカー
   JavaScript側で確認可能
*/
body::after {
  content: 'css-loaded';
  display: none;
} 